<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#005d73" />
    <meta name="description" content="全国の児童向けイベント（児童館・子育て支援等）をマップ上に表示。日付・地域・現在地で絞り込み。" />
    <meta property="og:title" content="こどもイベントマップ" />
    <meta property="og:description" content="全国の児童向けイベントをマップで探せる。今週末どこ行く？" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="./icon-512.svg" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="こどもイベントマップ" />
    <meta name="twitter:description" content="全国の児童向けイベントをマップで探せる。今週末どこ行く？" />
    <meta name="twitter:image" content="./icon-512.svg" />
    <title>こどもイベントマップ</title>
    <link rel="manifest" href="./manifest.json" />
    <link rel="icon" href="./icon-192.svg" type="image/svg+xml" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header>
      <h1>こどもイベントマップ</h1>
      <p class="description">
        全国の児童向けイベント（児童館・子育て支援等）をマップ上に表示するページです。
      </p>
      <div class="sub" id="dateText">読み込み中...</div>
    </header>

    <div class="mobile-tabs">
      <button type="button" class="mobile-tab active" data-tab="list">リスト</button>
      <button type="button" class="mobile-tab" data-tab="map">マップ</button>
    </div>

    <div class="layout">
      <aside class="side">
        <details class="controls-section" open>
          <summary class="controls-toggle">絞り込み</summary>
          <div class="controls">
            <div class="date-range">
              <div class="date-field">
                <label for="fromDate">いつから</label>
                <input id="fromDate" type="date" />
              </div>
              <span class="date-separator">〜</span>
              <div class="date-field">
                <label for="untilDate">いつまで</label>
                <input id="untilDate" type="date" />
              </div>
            </div>
            <div class="date-presets">
              <button type="button" data-preset="today">今日</button>
              <button type="button" data-preset="tomorrow">明日</button>
              <button type="button" data-preset="weekend">今週末</button>
              <button type="button" data-preset="next-weekend">来週末</button>
            </div>

            <input type="text" id="searchInput" placeholder="イベント名・会場で検索…" />

            <details class="region-section" open>
              <summary class="region-filter-title">表示する地域</summary>
              <div class="region-bulk">
                <button id="selectAllBtn" type="button">全選択</button>
                <button id="clearAllBtn" type="button">全解除</button>
              </div>
              <div id="regionFilters"></div>
            </details>

            <button type="button" id="nearbyBtn">現在地から近い順</button>
            <button type="button" id="resetBtn" class="reset-btn">条件リセット</button>
            <p class="loading" id="status"></p>
          </div>
        </details>
        <div class="list" id="list"></div>
      </aside>
      <main>
        <div id="map"></div>
      </main>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <script src="./app.js"></script>
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("./sw.js");
      }
    </script>
  </body>
</html>
