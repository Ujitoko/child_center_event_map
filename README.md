# 当日イベント地図 MVP

複数ソースの実データを使って、近場のイベントを地図に表示するシンプルなWebアプリです。

## 使い方

```bash
npm start
```

起動後: `http://localhost:8787`

## 実データ仕様

- データソース:
  - `Doorkeeper API`
  - `connpass`（公開HTMLを取得してイベント詳細を抽出）
  - 自治体イベントカレンダー（`杉並区 / 豊島区 / 江戸川区`）
- 期間は `当日 -> 3日以内 -> 7日以内 -> 30日以内` の順で自動拡張
- 緯度経度があるイベントのみ地図表示
- 自治体イベントは会場名/区名を国土地理院APIでジオコーディングして地図化
- 自治体イベント詳細の `iCalendar` から開始/終了時刻を抽出して反映
- サーバー側で日次スナップショットを作成（`data/events_snapshot.json`）
- APIリクエスト時はスナップショットのみ参照し、取得済みデータをフィルタして返却
- 起動時はスナップショットを読み込み、古い場合はバックグラウンドで更新
- 重複イベントはタイトル/日付/座標で自動統合
- UI側で以下をフィルタ
  - 現在地からの半径(km)
  - 更新3日以内のみ

## エンドポイント

- `GET /api/events`
  - 既定キーワード: `子ども, 親子, 家族`
- `GET /api/events?q=親子`
  - キーワードを1つ指定可能
- `GET /api/events?days=90`
  - 表示期間を1〜90日で指定可能
- `GET /api/events?refresh=1`
  - スナップショットを強制再収集（管理用）
